/*! rangeslider.js - v0.2.2 | (c) 2014 @andreruffert | MIT license | https://github.com/andreruffert/rangeslider.js */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){"use strict";function b(){var a=document.createElement("input");return a.setAttribute("type","range"),"text"!==a.type}function c(){var a=!1,b=b||{};return("ontouchstart"in window||window.DocumentTouch&&document instanceof b)&&(a=!0),a}function d(a,b){var c=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)}function e(a,b){return b=b||100,function(){if(!a.debouncing){var c=Array.prototype.slice.apply(arguments);a.lastReturnVal=a.apply(window,c),a.debouncing=!0}return clearTimeout(a.debounceTimeout),a.debounceTimeout=setTimeout(function(){a.debouncing=!1},b),a.lastReturnVal}}function f(b,c){if(this.$window=a(window),this.$document=a(document),this.$element=a(b),this.options=a.extend({},j,c),this._defaults=j,this._name=g,this.polyfill=this.options.polyfill,this.onInit=this.options.onInit,this.onSlide=this.options.onSlide,this.onSlideEnd=this.options.onSlideEnd,this.polyfill&&i)return!1;this.value=parseInt(this.$element[0].value)||0,this.min=parseInt(this.$element[0].getAttribute("min"))||0,this.max=parseInt(this.$element[0].getAttribute("max"))||0,this.step=parseInt(this.$element[0].getAttribute("step"))||1,this.$range=a('<div class="'+this.options.rangeClass+'" />'),this.$fill=a('<div class="'+this.options.fillClass+'" />'),this.$handle=a('<div class="'+this.options.handleClass+'" />'),this.$base=a('<div class="'+this.options.baseClass+'" />').insertBefore(this.$element).prepend(this.$range,this.$fill,this.$handle,this.$element),this.$element.css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",visibility:"hidden"}),this.handleDown=a.proxy(this.handleDown,this),this.handleMove=a.proxy(this.handleMove,this),this.handleEnd=a.proxy(this.handleEnd,this),this.init();var f=this;this.$window.on("resize."+g,e(function(){d(function(){f.update()},300)},20)),this.$document.on(this.options.startEvent,"."+this.options.baseClass,this.handleDown)}var g="rangeslider",h=c(),i=b(),j={polyfill:!0,baseClass:"rangeslider",rangeClass:"rangeslider__range",fillClass:"rangeslider__fill",handleClass:"rangeslider__handle",startEvent:(h?"touchstart":"mousedown")+"."+g,moveEvent:(h?"touchmove":"mousemove")+"."+g,endEvent:(h?"touchend":"mouseup")+"."+g};f.prototype.init=function(){this.update(),this.onInit&&"function"==typeof this.onInit&&this.onInit()},f.prototype.update=function(){this.handleWidth=this.$handle.width(),this.rangeWidth=this.$range[0].offsetWidth,this.maxHandleX=this.rangeWidth-this.handleWidth,this.grabX=this.handleWidth/2,this.position=this.getPositionFromValue(this.value),this.setPosition(this.position)},f.prototype.handleDown=function(a){a.preventDefault(),this.$document.on(this.options.moveEvent,this.handleMove),this.$document.on(this.options.endEvent,this.handleEnd);var b=this.getRelativePosition(this.$base[0],a),c=this.getPositionFromNode(this.$handle[0])-this.getPositionFromNode(this.$base[0]);this.setPosition(b-this.grabX),b>=c&&b<c+this.handleWidth&&(this.grabX=b-c)},f.prototype.handleMove=function(a){a.preventDefault();var b=this.getRelativePosition(this.$base[0],a);this.setPosition(b-this.grabX)},f.prototype.handleEnd=function(a){a.preventDefault(),this.$document.off(this.options.moveEvent,this.handleMove),this.$document.off(this.options.endEvent,this.handleEnd);var b=this.getRelativePosition(this.$base[0],a);this.onSlideEnd&&"function"==typeof this.onSlideEnd&&this.onSlideEnd(b-this.grabX,this.value)},f.prototype.cap=function(a,b,c){return b>a?b:a>c?c:a},f.prototype.setPosition=function(a){var b,c;b=this.cap(a,0,this.maxHandleX),c=this.getValueFromPosition(b),this.step>1&&(c=Math.ceil(c/this.step)*this.step,b=this.getPositionFromValue(c)),b=Math.ceil(b),this.$fill[0].style.width=b+this.handleWidth+"px",this.$handle[0].style.left=b+"px",this.setValue(c),this.position=b,this.value=c,this.onSlide&&"function"==typeof this.onSlide&&this.onSlide(b,c)},f.prototype.getPositionFromNode=function(a){for(var b=0;null!==a;)b+=a.offsetLeft,a=a.offsetParent;return b},f.prototype.getRelativePosition=function(a,b){return(b.pageX||b.originalEvent.changedTouches[0].pageX||0)-this.getPositionFromNode(a)},f.prototype.getPositionFromValue=function(a){var b,c;return b=(a-this.min)/(this.max-this.min)*100,c=b/100*this.maxHandleX},f.prototype.getValueFromPosition=function(a){var b,c;return b=a/this.maxHandleX*100,c=Math.ceil(b/100*(this.max-this.min)+this.min)},f.prototype.setValue=function(a){this.$element.val(a).trigger("change")},a.fn[g]=function(b){return this.each(function(){a.data(this,"plugin_"+g)||a.data(this,"plugin_"+g,new f(this,b))})}});